<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="alternate" hreflang="en-us" href="https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/guide/quickstart/4_whole_pipeline.html"><meta property="og:url" content="https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/zh/guide/quickstart/4_whole_pipeline.html"><meta property="og:site_name" content="ForensicHub 文档"><meta property="og:description" content="在Tensorboard中，我们可以看到很多有用的指标，可以监测训练过程和模型的收敛情况。它们全部和my_model.py中模型的forward()函数返回的字典中的信息对应。 损失函数的可视化对应visual_loss字段对应的字典: 评价指标的计算来自于pred_mask和pred_label的结果和mask计算得到： alt text 可视化的预..."><meta property="og:type" content="article"><meta property="og:image" content="https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/images/training/training_loss.png"><meta property="og:locale" content="zh-CN"><meta property="og:locale:alternate" content="en-US"><meta property="og:updated_time" content="2025-04-16T09:03:03.000Z"><meta property="article:modified_time" content="2025-04-16T09:03:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"","image":["https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/images/training/training_loss.png","https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/images/training/pixelF1.png","https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/images/training/train_test_samples.png","https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/images/training/testing_results.png","https://scu-zjz.github.io/ForensicHub-doc/ForensicHub-doc/images/training/robustness_test_plot.png"],"dateModified":"2025-04-16T09:03:03.000Z","author":[]}</script><link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="IMDL-BenCo-documentation"><meta name="apple-mobile-web-app-title" content="IMDL-BenCo-documentation"><meta name="theme-color" content="#3eaf7c"><title>ForensicHub 文档</title><meta name="description" content="在Tensorboard中，我们可以看到很多有用的指标，可以监测训练过程和模型的收敛情况。它们全部和my_model.py中模型的forward()函数返回的字典中的信息对应。 损失函数的可视化对应visual_loss字段对应的字典: 评价指标的计算来自于pred_mask和pred_label的结果和mask计算得到： alt text 可视化的预...">
    <link rel="preload" href="/ForensicHub-doc/assets/style-Dd0dO5L-.css" as="style"><link rel="stylesheet" href="/ForensicHub-doc/assets/style-Dd0dO5L-.css">
    <link rel="modulepreload" href="/ForensicHub-doc/assets/app-D_z27tro.js"><link rel="modulepreload" href="/ForensicHub-doc/assets/4_whole_pipeline.html-CGmaH8vm.js"><link rel="modulepreload" href="/ForensicHub-doc/assets/robustness_test_plot-d3hRRG04.js">
    <link rel="prefetch" href="/ForensicHub-doc/assets/index.html-aPdRkXsc.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/get-started.html-s-lAL24i.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro.html-KV957E08.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/index.html-Bmz9lzGN.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/get-started.html-DlEJXK0I.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/framework.html-BQKpt6BI.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/introduction.html-BAtAxnIH.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/0_dataprepare.html-vObELR9U.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/1_model_zoo.html-lRPVYX2S.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/2_load_ckpt.html-LlAXx-in.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/3_demo.html-DhvToKhh.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/4_whole_pipeline.html-BlvyJfIM.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/install.html-B1bvi9nN.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/AIGCdatasets.html-FgfSW_hO.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/IMDLdatasets.html-BI2IEUVI.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/benco.html-BChYfH-i.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/general.html-C4Vi2yTx.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro_content.html-Be_3S3bd.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro_content.html-Bw3XAcxe.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/iml_vit.html-CkA5VzMb.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro_content.html-DAU_sjbD.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/leaderboard.html-B0anWUtm.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/mvss.html-BxIdToJq.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/trufor.html-B1aWDF1k.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro.html-YJJW0eM1.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/framework.html-BEXGPZjl.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/introduction.html-fB966suy.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/0_dataprepare.html-D2nvJzet.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/1_model_zoo.html-CYKAT8ET.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/2_load_ckpt.html-Bl2JFCpo.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/3_demo.html-B68A4ExT.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/install.html-De2u5SF0.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/AIGCdatasets.html-CrI8pOlV.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/IMDLdatasets.html-CzTgnJ0v.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/benco.html-D8pdGJSz.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/general.html-E4E1-cFU.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro_content.html-CVnjlZ5r.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro_content.html-CzCorIZV.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/iml_vit.html-CGQBIu5e.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/intro_content.html-B3q4NAfP.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/leaderboard.html-DWhXnxYn.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/mvss.html-Cz3QptWC.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/trufor.html-Di_TDY3r.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/404.html-DhtUo3qd.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/index-B-M8YVCw.js" as="script"><link rel="prefetch" href="/ForensicHub-doc/assets/giscus-BwIGYrs0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/ForensicHub-doc/zh/"><img class="vp-site-logo" src="/ForensicHub-doc/images/IMDL_BenCo.png" alt="ForensicHub 文档"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">ForensicHub 文档</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="指南"><span class="title">指南</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="指南"><span class="title">指南</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>基本信息</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/base/introduction.html" aria-label="简介"><!--[--><!--[--><!--]--><!--]-->简介<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/base/framework.html" aria-label="框架设计"><!--[--><!--[--><!--]--><!--]-->框架设计<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>快速上手</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/install.html" aria-label="安装"><!--[--><!--[--><!--]--><!--]-->安装<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/0_dataprepare.html" aria-label="数据集准备"><!--[--><!--[--><!--]--><!--]-->数据集准备<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/1_model_zoo.html" aria-label="案例一：使用Model Zoo训练复现SoTA论文"><!--[--><!--[--><!--]--><!--]-->案例一：使用Model Zoo训练复现SoTA论文<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/2_load_ckpt.html" aria-label="案例二：使用Model Zoo配合checkpoint快速测试"><!--[--><!--[--><!--]--><!--]-->案例二：使用Model Zoo配合checkpoint快速测试<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/3_demo.html" aria-label="案例三：使用benco init实现你自己的模型"><!--[--><!--[--><!--]--><!--]-->案例三：使用benco init实现你自己的模型<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="API文档"><span class="title">API文档</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="API文档"><span class="title">API文档</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ForensicHub-doc/zh/API/intro.html" aria-label="API文档"><!--[--><!--[--><!--]--><!--]-->API文档<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="篡改检测信息集合"><span class="title">篡改检测信息集合</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="篡改检测信息集合"><span class="title">篡改检测信息集合</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>数据集</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/data/IMDLdatasets.html" aria-label="# 篡改检测数据集索引"><!--[--><!--[--><!--]--><!--]--># 篡改检测数据集索引<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/data/AIGCdatasets.html" aria-label="AIGC生成内容数据集索引"><!--[--><!--[--><!--]--><!--]-->AIGC生成内容数据集索引<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>模型和论文</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/models/benco.html" aria-label="BenCo内实现的模型"><!--[--><!--[--><!--]--><!--]-->BenCo内实现的模型<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/models/general.html" aria-label="其他模型，算法，论文"><!--[--><!--[--><!--]--><!--]-->其他模型，算法，论文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ForensicHub-doc/guide/quickstart/4_whole_pipeline.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/ForensicHub-doc/zh/guide/quickstart/4_whole_pipeline.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/scu-zjz/ForensicHub" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="切换颜色模式"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="指南"><span class="title">指南</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="指南"><span class="title">指南</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>基本信息</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/base/introduction.html" aria-label="简介"><!--[--><!--[--><!--]--><!--]-->简介<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/base/framework.html" aria-label="框架设计"><!--[--><!--[--><!--]--><!--]-->框架设计<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>快速上手</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/install.html" aria-label="安装"><!--[--><!--[--><!--]--><!--]-->安装<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/0_dataprepare.html" aria-label="数据集准备"><!--[--><!--[--><!--]--><!--]-->数据集准备<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/1_model_zoo.html" aria-label="案例一：使用Model Zoo训练复现SoTA论文"><!--[--><!--[--><!--]--><!--]-->案例一：使用Model Zoo训练复现SoTA论文<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/2_load_ckpt.html" aria-label="案例二：使用Model Zoo配合checkpoint快速测试"><!--[--><!--[--><!--]--><!--]-->案例二：使用Model Zoo配合checkpoint快速测试<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/guide/quickstart/3_demo.html" aria-label="案例三：使用benco init实现你自己的模型"><!--[--><!--[--><!--]--><!--]-->案例三：使用benco init实现你自己的模型<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="API文档"><span class="title">API文档</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="API文档"><span class="title">API文档</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ForensicHub-doc/zh/API/intro.html" aria-label="API文档"><!--[--><!--[--><!--]--><!--]-->API文档<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="篡改检测信息集合"><span class="title">篡改检测信息集合</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="篡改检测信息集合"><span class="title">篡改检测信息集合</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>数据集</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/data/IMDLdatasets.html" aria-label="# 篡改检测数据集索引"><!--[--><!--[--><!--]--><!--]--># 篡改检测数据集索引<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/data/AIGCdatasets.html" aria-label="AIGC生成内容数据集索引"><!--[--><!--[--><!--]--><!--]-->AIGC生成内容数据集索引<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>模型和论文</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/models/benco.html" aria-label="BenCo内实现的模型"><!--[--><!--[--><!--]--><!--]-->BenCo内实现的模型<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/models/general.html" aria-label="其他模型，算法，论文"><!--[--><!--[--><!--]--><!--]-->其他模型，算法，论文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title">选择语言</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/ForensicHub-doc/guide/quickstart/4_whole_pipeline.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/ForensicHub-doc/zh/guide/quickstart/4_whole_pipeline.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/scu-zjz/ForensicHub" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">指南 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/base/introduction.html" aria-label="简介"><!--[--><!--[--><!--]--><!--]-->简介<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/base/framework.html" aria-label="框架设计"><!--[--><!--[--><!--]--><!--]-->框架设计<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">快速上手 <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/quickstart/install.html" aria-label="安装"><!--[--><!--[--><!--]--><!--]-->安装<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/quickstart/0_dataprepare.html" aria-label="数据集准备"><!--[--><!--[--><!--]--><!--]-->数据集准备<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/quickstart/1_model_zoo.html" aria-label="案例一：使用Model Zoo训练复现SoTA论文"><!--[--><!--[--><!--]--><!--]-->案例一：使用Model Zoo训练复现SoTA论文<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/quickstart/2_load_ckpt.html" aria-label="案例二：使用Model Zoo配合checkpoint快速测试"><!--[--><!--[--><!--]--><!--]-->案例二：使用Model Zoo配合checkpoint快速测试<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/ForensicHub-doc/zh/guide/quickstart/3_demo.html" aria-label="案例三：使用benco init实现你自己的模型"><!--[--><!--[--><!--]--><!--]-->案例三：使用benco init实现你自己的模型<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><p>在Tensorboard中，我们可以看到很多有用的指标，可以监测训练过程和模型的收敛情况。它们全部和<code>my_model.py</code>中模型的<code>forward()</code>函数返回的字典中的信息对应。</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line"><span class="token comment"># 构建输出字典</span></span>
<span class="line">        output_dict <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token string">&quot;backward_loss&quot;</span><span class="token punctuation">:</span> combined_loss<span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;pred_mask&quot;</span><span class="token punctuation">:</span> torch<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>seg_pred<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;pred_label&quot;</span><span class="token punctuation">:</span> torch<span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span>cls_pred<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">            <span class="token string">&quot;visual_loss&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">&quot;total_loss&quot;</span><span class="token punctuation">:</span> combined_loss<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;seg_loss&quot;</span><span class="token punctuation">:</span> seg_loss<span class="token punctuation">,</span></span>
<span class="line">                <span class="token string">&quot;cls_loss&quot;</span><span class="token punctuation">:</span> cls_loss</span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">            <span class="token string">&quot;visual_image&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token string">&quot;pred_mask&quot;</span><span class="token punctuation">:</span> seg_pred<span class="token punctuation">,</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> output_dict</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>损失函数的可视化对应<code>visual_loss</code>字段对应的字典:</p><p><img src="/ForensicHub-doc/images/training/training_loss.png" alt=""></p><p>评价指标的计算来自于<code>pred_mask</code>和<code>pred_label</code>的结果和<code>mask</code>计算得到：</p><p><img src="/ForensicHub-doc/images/training/pixelF1.png" alt="alt text"></p><p>可视化的预测结果，由<code>visual_image</code>字段得到，且默认输入的<code>image</code>，<code>mask</code>等图像也会自动被可视化输出，用于直接观察模型当前预测不好的地方在哪，方便进一步改进模型。</p><p><img src="/ForensicHub-doc/images/training/train_test_samples.png" alt=""></p><div class="hint-container note"><p class="hint-container-title">注意</p><p>教程这里应该有图片样例，如果没看到图片，请检查网络连接或开启VPN。</p></div><p>所有训练后得到的权重（Checkpoint）都保存在了训练<code>train_mymodel.sh</code>脚本开头的<code>base_dir</code>所对应的路径中。相应的<code>Tensorboard</code>的日志文件也保存在这里，以供后续取用和查阅日志。</p><p>除了Tensorboard日志，我们还提供了一个纯文本的日志<code>log.txt</code>留作档案，它保存的内容比较简单，只包含每一个Epoch结束后所有的标量信息。样例如下：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">......</span>
<span class="line">{&quot;train_lr&quot;: 5.068414063259753e-05, &quot;train_total_loss&quot;: 0.040027402791482446, &quot;train_seg_loss&quot;: 0.04001608065957309, &quot;train_cls_loss&quot;: 1.1322131909352606e-05, &quot;test_pixel-level F1&quot;: 0.6269838496863315, &quot;epoch&quot;: 100}</span>
<span class="line">{&quot;train_lr&quot;: 4.9894792537480576e-05, &quot;train_total_loss&quot;: 0.03938291078949974, &quot;train_seg_loss&quot;: 0.039372251576574625, &quot;train_cls_loss&quot;: 1.0659212925112626e-05, &quot;epoch&quot;: 101}</span>
<span class="line">{&quot;train_lr&quot;: 4.910553386394297e-05, &quot;train_total_loss&quot;: 0.039195733024078264, &quot;train_seg_loss&quot;: 0.039184275720948555, &quot;train_cls_loss&quot;: 1.1457303129702722e-05, &quot;epoch&quot;: 102}</span>
<span class="line">{&quot;train_lr&quot;: 4.8316563303634596e-05, &quot;train_total_loss&quot;: 0.0385435631179897, &quot;train_seg_loss&quot;: 0.03853294577689024, &quot;train_cls_loss&quot;: 1.061734109946144e-05, &quot;epoch&quot;: 103}</span>
<span class="line">{&quot;train_lr&quot;: 4.752807947567499e-05, &quot;train_total_loss&quot;: 0.035692626619510615, &quot;train_seg_loss&quot;: 0.03568181328162471, &quot;train_cls_loss&quot;: 1.0813337885906548e-05, &quot;test_pixel-level F1&quot;: 0.6672104743469334, &quot;epoch&quot;: 104}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模型每4个Epoch测试一次，所以只有对应的epoch才会保存<code>test_pixel-level F1</code>。</p><p>至此，我们就解释完了所有训练过程中的输出内容。</p><h3 id="开展测试" tabindex="-1"><a class="header-anchor" href="#开展测试"><span>开展测试</span></a></h3><p>我们在前面的指标测试中看到在104Epoch时，模型还有上涨趋势，但为了节约时间，我们将训练停在这里，开展后续的测试。</p><p>篡改检测数据集之间的鸿沟较大，泛化性能是衡量模型性能最重要的指标，所以我们希望一次性测量所有指标。区别于前面的教程，我们要用到一次性可以涵盖多个测试集的<code>test_datasets.json</code>文件来帮助测试。其格式如下，我们也在<code>benco init</code>后的文件中提供了此文件的样例。</p><div class="language-JSON line-numbers-mode" data-highlighter="prismjs" data-ext="JSON"><pre><code><span class="line">{</span>
<span class="line">    &quot;Columbia&quot;: &quot;/mnt/data0/public_datasets/IML/Columbia.json&quot;,</span>
<span class="line">    &quot;NIST16_1024&quot;: &quot;/mnt/data0/public_datasets/IML/NIST16_1024&quot;,</span>
<span class="line">    &quot;NIST16_cleaned&quot;: &quot;/mnt/data0/public_datasets/IML/NIST16_1024_cleaning&quot;,</span>
<span class="line">    &quot;coverage&quot;: &quot;/mnt/data0/public_datasets/IML/coverage.json&quot;,</span>
<span class="line">    &quot;CASIAv1&quot;: &quot;/mnt/data0/public_datasets/IML/CASIA1.0&quot;,</span>
<span class="line">    &quot;IMD20_1024&quot;: &quot;/mnt/data0/public_datasets/IML/IMD_20_1024&quot;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里需要您预先处理好每一个数据集，数据集索引在<a class="route-link" href="/ForensicHub-doc/zh/imdl_data_model_hub/data/IMDLdatasets.html">篡改检测数据集索引</a>章节，格式要求在<a class="route-link" href="/ForensicHub-doc/zh/guide/quickstart/0_dataprepare.html">数据集准备章节</a>。上述路径必须整理为<code>ManiDataset</code>或者<code>JsonDataset</code>的格式。，</p><p>然后我们修改<code>test_mymodel.sh</code>文件来传入正确的参数，主要包含如下字段：</p><ul><li><code>--mymodel</code> 改为<code>MyConvNeXt</code></li><li>去掉多余的<code>--MyModel_Customized_param</code> 和 <code>--pre_trained_weights</code>尤其是<code>pretrained_path</code>一般是在模型训练前初始化的。测试阶段无关。</li><li>将<code>--checkpoint_path</code>设置为训练时输出所有<code>checkpoint-xx.pth</code>的文件夹。它会自动读取这下面所有的以<code>.pth</code>结尾的文件，并根据文件名中的数字确认该checkpoint来自于第几个epoch以正确的绘制测试时的指标折线图。</li><li>将<code>--test_data_json</code>设置为前文含有多个测试集信息的JSON的路径。</li><li>其它参数按照显存等条件要求，酌情设置即可，</li></ul><div class="hint-container important"><p class="hint-container-title">注意</p><p>如果你在训练时选择了<code>--if_padding</code>，这代表dataloader会将所有图像按照<a href="https://github.com/SunnyHaze/IML-ViT" target="_blank" rel="noopener noreferrer">IML-ViT</a>的0-padding方式组织，而非大多数模型的<code>--if_resizing</code>。那一定要确认测试时该参数与训练时保持一致，否则训练集和测试集不一致，一定会有性能损失。</p><p>可以通过Tensorboard可视化的图片双重检查是否正确选择padding或者resizing！</p></div><p>一个修改好的<code>test_mymodel.sh</code>如下：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token assign-left variable">base_dir</span><span class="token operator">=</span><span class="token string">&quot;./eval_dir&quot;</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">${base_dir}</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">CUDA_VISIBLE_DEVICES</span><span class="token operator">=</span><span class="token number">0,1</span> <span class="token punctuation">\</span></span>
<span class="line">torchrun  <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--standalone</span>    <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--nnodes</span><span class="token operator">=</span><span class="token number">1</span>     <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--nproc_per_node</span><span class="token operator">=</span><span class="token number">2</span> <span class="token punctuation">\</span></span>
<span class="line">./test.py <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--model</span> MyConvNeXt <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--world_size</span> <span class="token number">1</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--test_data_json</span> <span class="token string">&quot;./test_datasets.json&quot;</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--checkpoint_path</span> <span class="token string">&quot;./output_dir/&quot;</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--test_batch_size</span> <span class="token number">32</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--image_size</span> <span class="token number">512</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--if_resizing</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--output_dir</span> <span class="token variable">${base_dir}</span>/ <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--log_dir</span> <span class="token variable">${base_dir}</span>/ <span class="token punctuation">\</span></span>
<span class="line"><span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token variable">${base_dir}</span>/error.log <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token variable">${base_dir}</span>/logs.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后，记得修改<code>test.py</code>开头的<code>from mymodel import MyModel</code>为<code>from mymodel import MyConvNeXt</code>。</p><p>此时，运行如下指令即可开始批量在各种测试集上测试指标：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token function">sh</span> test_mymodel.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>此时也可以通过Tensorboard来查看测试进度和结果。可以在左侧的<code>filter</code>框过滤<code>eval_dir</code>来仅查看此次测试的输出结果。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">tensorboard <span class="token parameter variable">--logdir</span> ./</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>测试后得到的多个数据集的指标折线图如下，选择综合性能最好的Checkpoint，并在论文中记录相应的数据即可。</p><p><img src="/ForensicHub-doc/images/training/testing_results.png" alt=""></p><h3 id="鲁棒性测试" tabindex="-1"><a class="header-anchor" href="#鲁棒性测试"><span>鲁棒性测试</span></a></h3><p>鲁棒性测试因为对于“攻击类型”和“攻击强度”引入了两个维度进行网格搜索（<code>gird search</code>），所以一般只对测试阶段性能最好的那一个checkpoint进行鲁棒性测试。</p><p>所以相应的<code>test_robust_mymodel.sh</code>文件中，区别于<code>test_mymodel.sh</code>，这里的<code>--checkpoint_path</code>字段填入的路径指向一个具体的checkpoint，而非一个文件夹。</p><p>其他的字段同上，去掉无用的参数，填入需要的参数，并且记得修改<code>test_robust.py</code>开头的<code>from mymodel import MyModel</code>为<code>from mymodel import MyConvNeXt</code>。</p><p>我最终使用的<code>test_robust_mymodel.sh</code>如下</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line"><span class="token assign-left variable">base_dir</span><span class="token operator">=</span><span class="token string">&quot;./eval_robust_dir&quot;</span></span>
<span class="line"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">${base_dir}</span></span>
<span class="line"></span>
<span class="line"><span class="token assign-left variable">CUDA_VISIBLE_DEVICES</span><span class="token operator">=</span><span class="token number">0,1</span> <span class="token punctuation">\</span></span>
<span class="line">torchrun  <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--standalone</span>    <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--nnodes</span><span class="token operator">=</span><span class="token number">1</span>     <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--nproc_per_node</span><span class="token operator">=</span><span class="token number">2</span> <span class="token punctuation">\</span></span>
<span class="line">./test_robust.py <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--model</span> MyConvNeXt <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--world_size</span> <span class="token number">1</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--test_data_path</span> <span class="token string">&quot;/mnt/data0/public_datasets/IML/CASIA1.0&quot;</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--checkpoint_path</span> <span class="token string">&quot;/mnt/data0/xiaochen/workspace/ForensicHub_pure/guide/benco/output_dir/checkpoint-92.pth&quot;</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--test_batch_size</span> <span class="token number">32</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--image_size</span> <span class="token number">512</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--if_resizing</span> <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--output_dir</span> <span class="token variable">${base_dir}</span>/ <span class="token punctuation">\</span></span>
<span class="line">    <span class="token parameter variable">--log_dir</span> <span class="token variable">${base_dir}</span>/ <span class="token punctuation">\</span></span>
<span class="line"><span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token variable">${base_dir}</span>/error.log <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token variable">${base_dir}</span>/logs.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>鲁棒性测试具体的攻击策略和强度的调整需要修改<code>test_robust.py</code>，请通过搜索<code>TODO</code>来定位到这段可以修改的代码：</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py"><pre><code><span class="line">    <span class="token triple-quoted-string string">&quot;&quot;&quot;=================================================</span>
<span class="line">    Modify here to Set the robustness test parameters TODO</span>
<span class="line">    ===================================================&quot;&quot;&quot;</span></span>
<span class="line">    robustness_list <span class="token operator">=</span> <span class="token punctuation">[</span></span>
<span class="line">            GaussianBlurWrapper<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">            GaussianNoiseWrapper<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> </span>
<span class="line">            JpegCompressionWrapper<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些<code>wrapper</code>后面的列表代表具体攻击的强度，他们内部封装了<a href="https://github.com/albumentations-team/albumentations" target="_blank" rel="noopener noreferrer">Albumentation</a>提供的Transform来实现攻击。<code>wrapper</code>本身的实现请参考此<a href="https://github.com/scu-zjz/ForensicHub/blob/main/ForensicHub/transforms/robustness_wrapper.py" target="_blank" rel="noopener noreferrer">链接</a>。</p><p>特别的，你可以在当前路径下参考源码中<code>wrapper</code>的实现封装新的自定义<code>wrapper</code>，然后像<code>from mymodel import MyConvNeXt</code>一样import你自己的wrapper到这里使用。这样无需修改源码，也能实现自定义灵活的鲁棒性测试。</p><hr><p>对于测试结果，同样的，你可以通过Tensorboard查看：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code><span class="line">tensorboard <span class="token parameter variable">--logdir</span> ./</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这时候可能会产生很多很多不同的记录，请活用Tensorboard左上角的filter功能，过滤你当前需要记录的攻击类型和响应的结果。</p><p><img src="/ForensicHub-doc/images/training/robustness_test_plot.png" alt=""></p><hr><h3 id="结语" tabindex="-1"><a class="header-anchor" href="#结语"><span>结语</span></a></h3><p>这样我们就完成了一次从头到尾自己设计模型，训练模型，完成测试及鲁棒性测试的过程。有任何疑惑或者不完善的地方，欢迎向我们的仓库提issue或者给作者团队发邮件联系。第一手用户的建议对我们，以及对今后的学者帮助都会很大！</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/scu-zjz/ForensicHub-doc/edit/main/docs/zh/guide/quickstart/4_whole_pipeline.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->在 GitHub 上编辑此页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">上次更新: </span><time class="meta-item-info" datetime="2025-04-16T09:03:03.000Z" data-allow-mismatch>2025/4/16 09:03</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">贡献者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: mxch1122@126.com">Ma Xiaochen (马晓晨)</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/ForensicHub-doc/assets/app-D_z27tro.js" defer></script>
  </body>
</html>
